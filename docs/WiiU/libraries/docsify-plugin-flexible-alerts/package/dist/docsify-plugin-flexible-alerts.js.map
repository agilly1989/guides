{"version":3,"file":"docsify-plugin-flexible-alerts.js","sources":["../node_modules/style-inject/dist/style-inject.es.js","../src/index.js"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","// eslint-disable-next-line no-unused-vars\nimport styles from './style.scss';\n\n(function () {\n  const CONFIG = {\n    style: 'callout',\n    note: {\n      label: 'Note',\n      icon: 'icon-note',\n      className: 'note'\n    },\n    tip: {\n      label: 'Tip',\n      icon: 'icon-tip',\n      className: 'tip'\n    },\n    warning: {\n      label: 'Warning',\n      icon: 'icon-warning',\n      className: 'warning'\n    },\n    attention: {\n      label: 'Attention',\n      icon: 'icon-attention',\n      className: 'attention'\n    },\n    // To support further keys in plugin we do an automated mapping between alert types.\n    typeMappings: {\n      info: 'note',\n      danger: 'attention'\n    }\n  };\n\n  function mergeObjects(obj1, obj2, level = 0) {\n    for (const property in obj2) {\n      try {\n        // Property in destination object set; update its value.\n        if (obj2[property].constructor === Object && level < 1) {\n          obj1[property] = mergeObjects(obj1[property], obj2[property], level + 1);\n        } else {\n          obj1[property] = obj2[property];\n        }\n      } catch(e) {\n        // Property in destination object not set; create it and set its value.\n        obj1[property] = obj2[property];\n      }\n    }\n\n    return obj1;\n  }\n\n  const install = function (hook, vm) {\n    const options = mergeObjects(CONFIG, vm.config['flexible-alerts'] || vm.config.flexibleAlerts);\n\n    const findSetting = function findAlertSetting(input, key, fallback, callback) {\n      const match = (input || '').match(new RegExp(`${key}:(([\\\\s\\\\w\\\\u00A0-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFEF-]*))`));\n\n      if (!match) {\n        return callback ? callback(fallback) : fallback;\n      }\n\n      return callback ? callback(match[1]) : match[1];\n    };\n\n    hook.afterEach(function (html, next) {\n      const modifiedHtml = html.replace(/<\\s*blockquote[^>]*>[\\s]+?(?:<p>)?\\[!(\\w*)((?:\\|[\\w*:[\\s\\w\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF-]*)*?)\\]([\\s\\S]*?)(?:<\\/p>)?<\\s*\\/\\s*blockquote>/g, function (match, key, settings, value) {\n\n        if (!options[key.toLowerCase()] && options.typeMappings[key.toLowerCase()]) {\n          key = options.typeMappings[key.toLowerCase()];\n        }\n\n        const config = options[key.toLowerCase()];\n\n        if (!config) {\n          return match;\n        }\n\n        const style = findSetting(settings, 'style', options.style);\n        let isIconVisible = findSetting(settings, 'iconVisibility', 'visible', (value) => value !== 'hidden');\n        let isLabelVisible = findSetting(settings, 'labelVisibility', 'visible', (value) => value !== 'hidden');\n        let label = findSetting(settings, 'label', config.label);\n        const icon = findSetting(settings, 'icon', config.icon);\n        const className = findSetting(settings, 'className', config.className);\n\n        // Label can be language specific and could be specified via user configuration\n        if (typeof label === 'object') {\n          const foundLabel = Object.keys(label).filter(function (key) {\n            return vm.route.path.indexOf(key) > -1;\n          });\n\n          if (foundLabel && foundLabel.length > 0) {\n            label = label[foundLabel[0]];\n          } else {\n            isLabelVisible = false;\n            isIconVisible = false;\n          }\n        }\n\n        const iconTag = `<span class=\"icon ${icon}\"></span>`;\n        const titleTag = `<p class=\"title\">${isIconVisible ? iconTag : ''}${isLabelVisible ? label : ''}</p>`;\n\n        return (\n          `<div class=\"alert ${style} ${className}\">\n            ${isIconVisible || isLabelVisible ? titleTag : '' }\n            <p>${value}</p>\n          </div>`\n        );\n      });\n\n      next(modifiedHtml);\n    });\n  };\n\n  window.$docsify = window.$docsify || {};\n  window.$docsify.plugins = [].concat(install, window.$docsify.plugins);\n}());\n"],"names":["styleInject","css","ref","insertAt","document","head","getElementsByTagName","style","createElement","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","CONFIG","note","label","icon","className","tip","warning","attention","typeMappings","info","danger","mergeObjects","obj1","obj2","level","property","constructor","Object","e","install","hook","vm","options","config","flexibleAlerts","findSetting","findAlertSetting","input","key","fallback","callback","match","RegExp","afterEach","html","next","modifiedHtml","replace","settings","value","toLowerCase","isIconVisible","isLabelVisible","_typeof","foundLabel","keys","filter","route","path","indexOf","length","iconTag","titleTag","concat","window","$docsify","plugins"],"mappings":"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"}